<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Venture Harbour Engineering RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Venture Harbour Engineering Atom Feed"><title data-react-helmet="true">🤼‍♀️ Wrestly | Venture Harbour Engineering</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ventureharbour.tech/blog/wrestly"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="🤼‍♀️ Wrestly | Venture Harbour Engineering"><meta data-react-helmet="true" name="description" content="Wrestling with rest? Try Wrestly!"><meta data-react-helmet="true" property="og:description" content="Wrestling with rest? Try Wrestly!"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2022-02-28T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/royletron"><meta data-react-helmet="true" property="article:tag" content="libraries,oss"><link data-react-helmet="true" rel="icon" href="/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ventureharbour.tech/blog/wrestly"><link data-react-helmet="true" rel="alternate" href="https://ventureharbour.tech/blog/wrestly" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ventureharbour.tech/blog/wrestly" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.0a3e65d5.css">
<link rel="preload" href="/assets/js/runtime~main.1fdf8515.js" as="script">
<link rel="preload" href="/assets/js/main.c019e0ef.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="VentureHarbour Engineering" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="VentureHarbour Engineering" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/careers/intro">Career Framework</a><a class="navbar__item navbar__link" href="/showcase">Showcase</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/exhaustive-switch">Static Exhaustive Switches in Typescript</a></li><li class="sidebarItem_CF0Q"><a aria-current="page" class="sidebarItemLink_miNk sidebarItemLinkActive_RRTD" href="/blog/wrestly">🤼‍♀️ Wrestly</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/count-voncount">🧛‍♂️ Von Count</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/hello-world">👋 Hello World</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">🤼‍♀️ Wrestly</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-02-28T00:00:00.000Z" itemprop="datePublished">February 28, 2022</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/royletron" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_o0gy" src="https://github.com/royletron.png" alt="Darren 🧙‍♂️"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/royletron" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Darren 🧙‍♂️</span></a></div><small class="avatar__subtitle" itemprop="description">CTO @ Venture Harbour</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p><strong>This week we have been working with remote APIs, Webhooks and OAuth</strong>. Those alone will be blogged about plenty in the future, but in doing this task we have bourne another mini project that we have found really useful. Typically, when doing this sort of work, I&#x27;ve always had this habit of running a dummy server that logs out requests and blindly responds to them. This helps me see what is going on, and what external things are either redirecting or posting directly to our APIs. Up to now I have never really done much more than run a server where all requests are <code>console.log</code>&#x27;ed and <code>res.send(&#x27;ok&#x27;)</code>&#x27;ed, but this time around added an SQLite backed so I could see request history, and a nice front end so the payloads were readable. <a href="https://npmjs.com/wrestly" target="_blank" rel="noopener noreferrer">So here is <em>wrestly</em></a></p><div style="text-align:center"><p><img alt="Our Glorious Mascot" src="/assets/images/logo-6eab9b24879d187ebbedae9eb001c4f4.svg" width="87" height="80"></p></div><p><strong>Wrestly</strong> is a simple http server that will accept any requests and store their <code>body</code>, <code>headers</code> and <code>cookies</code> as well as any <code>query</code> params into a SQLite DB. It allows you to list the requests already made, and look at each one in detail. We don&#x27;t really focus on the response, it just gives you a nice <code>200</code> and whatever the contents of the original request was. Routes that go via <code>/api/**/*</code> paths will always respond with JSON - which was useful for us - otherwise it just shows Wrestly&#x27;s own webpage with the contents of the original request. It&#x27;ll parse any <code>JSON</code> or <code>x-www-form-urlencoded</code> bodies included with requests, and it&#x27;ll also record the <code>method</code> and <code>url</code>.</p><figcaption align="center">Lists of requests that have come in</figcaption><p><img alt="Listing" src="/assets/images/listing-98803e57fbd618c29d91830faa8732d1.png" width="2526" height="2004"></p><p>You can access the list view at <code>http://localhost:6789/_x</code> and it should show all recorded requests to date. <em>Note</em> that by default requests are stored in memory, so if you quit <code>wrestly</code> and start again it&#x27;ll clear saved requests. You can override this by setting a designated <code>sqlite</code> file with the <code>-d</code> eg.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">wrestly -d ./requests.sqlite</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><figcaption align="center">View of a single request</figcaption><p><img alt="Request" src="/assets/images/request-fb57f87f566db8348100d5999c8e1ed3.png" width="2526" height="2004"></p><p>Combine this with something like <a href="https://ngrok.com" target="_blank" rel="noopener noreferrer"><code>ngrok</code></a> and you have a pretty whizzy environment for working on external webhooked services etc.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/libraries">libraries</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/oss">oss</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/exhaustive-switch"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Static Exhaustive Switches in Typescript</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/count-voncount"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">🧛‍♂️ Von Count</div></a></div></nav></main></div></div></div></div>
<script src="/assets/js/runtime~main.1fdf8515.js"></script>
<script src="/assets/js/main.c019e0ef.js"></script>
</body>
</html>