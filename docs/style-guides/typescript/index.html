<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Ventureneering Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Ventureneering Blog Atom Feed"><title data-react-helmet="true">Typescript | Ventureneering</title><meta data-react-helmet="true" property="og:url" content="https://ventureharbour.tech/docs/style-guides/typescript/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Typescript | Ventureneering"><meta data-react-helmet="true" name="description" content="Syntax"><meta data-react-helmet="true" property="og:description" content="Syntax"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ventureharbour.tech/docs/style-guides/typescript/"><link data-react-helmet="true" rel="alternate" href="https://ventureharbour.tech/docs/style-guides/typescript/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ventureharbour.tech/docs/style-guides/typescript/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.c22f7e1f.css">
<link rel="preload" href="/assets/js/runtime~main.feb4ec90.js" as="script">
<link rel="preload" href="/assets/js/main.e5be2b27.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Ventureneering</b></a><a class="navbar__item navbar__link" href="/docs/style-guides/index/">Style</a><a class="navbar__item navbar__link" href="/careers/intro/">Careers</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Style Guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/style-guides/typescript/">Typescript</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Typescript</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="syntax"></a>Syntax<a class="hash-link" href="#syntax" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="identifiers"></a>Identifiers<a class="hash-link" href="#identifiers" title="Direct link to heading">#</a></h3><p>Identifiers must use only ASCII letters, digits, underscores (for constants and structured test method names), and the &#x27;\(&#x27; sign. Thus each valid identifier name is matched by the regular expression `[\)\w]+`.</p><table><thead><tr><th align="left">Style</th><th align="left">Category</th></tr></thead><tbody><tr><td align="left"><code>UpperCamelCase</code></td><td align="left">class / interface / type / enum / decorator / type parameters</td></tr><tr><td align="left"><code>lowerCamelCase</code></td><td align="left">variable / parameter / function / method / property / module alias</td></tr><tr><td align="left"><code>CONSTANT_CASE</code></td><td align="left">global constant values, including enum values</td></tr><tr><td align="left"><code>#ident</code></td><td align="left">private identifiers are never used.</td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="abbreviations"></a>Abbreviations<a class="hash-link" href="#abbreviations" title="Direct link to heading">#</a></h4><p>Treat abbreviations like acronyms in names as whole words, i.e. use <code>loadHttpUrl</code>, not <code>loadHTTPURL</code>, unless required by a platform name (e.g. <code>XMLHttpRequest</code>).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dollar-sign"></a>Dollar sign<a class="hash-link" href="#dollar-sign" title="Direct link to heading">#</a></h4><p>Identifiers <em>should not</em> generally use <code>$</code>, except when aligning with naming conventions for third party frameworks. <a href="#naming-style">See below</a> for more on using <code>$</code> with <code>Observable</code> values.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="type-parameters"></a>Type parameters<a class="hash-link" href="#type-parameters" title="Direct link to heading">#</a></h4><p>Type parameters, like in <code>Array&lt;T&gt;</code>, may use a single upper case character (<code>T</code>) or <code>UpperCamelCase</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="test-names"></a>Test names<a class="hash-link" href="#test-names" title="Direct link to heading">#</a></h4><p>Test method names in Closure <code>testSuite</code>s and similar xUnit-style test frameworks may be structured with <code>_</code> separators, e.g. <code>testX_whenY_doesZ()</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="_-prefixsuffix"></a><code>_</code> prefix/suffix<a class="hash-link" href="#_-prefixsuffix" title="Direct link to heading">#</a></h4><p>Identifiers must not use <code>_</code> as a prefix or suffix.</p><p>This also means that <code>_</code> must not be used as an identifier by itself (e.g. to indicate a parameter is unused).</p><blockquote><p>Tip: If you only need some of the elements from an array (or TypeScript tuple), you can insert extra commas in a destructuring statement to ignore in-between elements:</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// a &lt;- 1, b &lt;- 10</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="imports"></a>Imports<a class="hash-link" href="#imports" title="Direct link to heading">#</a></h4><p>Module namespace imports are <code>lowerCamelCase</code> while files are <code>snake_case</code>, which means that imports correctly will not match in casing style, such as </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword" style="color:#00009f">as</span><span class="token imports"> fooBar</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./foo_bar&#x27;</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Some libraries might commonly use a namespace import prefix that violates this naming scheme, but overbearingly common open source use makes the violating style more readable. The only libraries that currently fall under this exception are: </p><ul><li><a href="https://jquery.com/" target="_blank" rel="noopener noreferrer">jquery</a>, using the <code>$</code> prefix</li><li><a href="https://threejs.org/" target="_blank" rel="noopener noreferrer">threejs</a>, using the <code>THREE</code> prefix</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="constants"></a>Constants<a class="hash-link" href="#constants" title="Direct link to heading">#</a></h4><p><code>CONSTANT_CASE</code> indicates that a value is <em>intended</em> to not be changed, and may be used for values that can technically be modified (i.e. values that are not deeply frozen) to indicate to users that they must not be modified.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">UNIT_SUFFIXES</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;milliseconds&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ms&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;seconds&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;s&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Even though per the rules of JavaScript UNIT_SUFFIXES is</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// mutable, the uppercase shows users to not modify it.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>A constant can also be a <code>static readonly</code> property of a class.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">MY_SPECIAL_NUMBER</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">bar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">MY_SPECIAL_NUMBER</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If a value can be instantiated more than once over the lifetime of the program, or if users mutate it in any way, it must use <code>lowerCamelCase</code>.</p><p>If a value is an arrow function that implements an interface, then it can be declared <code>lowerCamelCase</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="aliases"></a>Aliases<a class="hash-link" href="#aliases" title="Direct link to heading">#</a></h4><p>When creating a local-scope alias of an existing symbol, use the format of the existing identifier. The local alias must match the existing naming and format of the source. For variables use <code>const</code> for your local aliases, and for class fields use the <code>readonly</code> attribute.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token maybe-class-name">Foo</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">SomeType</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">CAPACITY</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Teapot</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token maybe-class-name">BrewStateEnum</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">BrewStateEnum</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">CAPACITY</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">CAPACITY</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="naming-style"></a>Naming style<a class="hash-link" href="#naming-style" title="Direct link to heading">#</a></h4><p>TypeScript expresses information in types, so names <em>should not</em> be decorated with information that is included in the type. (See also <a href="https://testing.googleblog.com/2017/10/code-health-identifiernamingpostforworl.html" target="_blank" rel="noopener noreferrer">Testing Blog</a> for more about what not to include.)</p><p>Some concrete examples of this rule:</p><ul><li>Do not use trailing or leading underscores for private properties or methods.</li><li>Do not use the <code>opt_</code> prefix for optional parameters.<ul><li>For accessors, see <a href="#getters-and-setters-accessors">accessor rules</a> below.</li></ul></li><li>Do not mark interfaces specially (<code>IMyInterface</code> or <code>MyFooInterface</code>) unless it&#x27;s idiomatic in its environment. When introducing an interface for a class, give it a name that expresses why the interface exists in the first place (e.g. <code>class TodoItem</code> and <code>interface TodoItemStorage</code> if the interface expresses the format used for storage/serialization in JSON).</li><li>Suffixing <code>Observable</code>s with <code>$</code> is a common external convention and can help resolve confusion regarding observable values vs concrete values. Judgement on whether this is a useful convention is left up to individual teams, but <em>should</em> be consistent within projects.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="descriptive-names"></a>Descriptive names<a class="hash-link" href="#descriptive-names" title="Direct link to heading">#</a></h4><p>Names <em>must</em> be descriptive and clear to a new reader. Do not use abbreviations that are ambiguous or unfamiliar to readers outside your project, and do not abbreviate by deleting letters within a word.</p><ul><li><strong>Exception</strong>: Variables that are in scope for 10 lines or fewer, including arguments that are <em>not</em> part of an exported API, <em>may</em> use short (e.g. single letter) variable names.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="file-encoding-utf-8"></a>File encoding: UTF-8<a class="hash-link" href="#file-encoding-utf-8" title="Direct link to heading">#</a></h3><p>For non-ASCII characters, use the actual Unicode character (e.g. <code>âˆž</code>). For non-printable characters, the equivalent hex or Unicode escapes (e.g. <code>\u221e</code>) can be used along with an explanatory comment.</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">Good</div><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Perfectly clear, even without a comment.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> units </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Î¼s&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Use escapes for non-printable characters.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> output </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\ufeff&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> content</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// byte order mark</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">Bad</div><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Hard to read and prone to mistakes, even with the comment.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> units </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\u03bcs&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Greek letter mu, &#x27;s&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// The reader has no idea what this is.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> output </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\ufeff&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> content</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="comments--documentation"></a>Comments &amp; Documentation<a class="hash-link" href="#comments--documentation" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="jsdoc-vs-comments"></a>JSDoc vs comments<a class="hash-link" href="#jsdoc-vs-comments" title="Direct link to heading">#</a></h4><p>There are two types of comments, JSDoc (<code>/** ... */</code>) and non-JSDoc ordinary comments (<code>// ...</code> or <code>/* ... */</code>).</p><ul><li>Use <code>/** JSDoc */</code> comments for documentation, i.e. comments a user of the code should read.</li><li>Use <code>// line comments</code> for implementation comments, i.e. comments that only concern the implementation of the code itself.</li></ul><p>JSDoc comments are understood by tools (such as editors and documentation generators), while ordinary comments are only for other humans.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="jsdoc-rules-follow-the-javascript-style"></a>JSDoc rules follow the JavaScript style<a class="hash-link" href="#jsdoc-rules-follow-the-javascript-style" title="Direct link to heading">#</a></h4><p>In general, follow the <a href="https://google.github.io/styleguide/jsguide.html#jsdoc" target="_blank" rel="noopener noreferrer">JavaScript style guide&#x27;s rules for JSDoc</a>, sections 7.1 - 7.5. The remainder of this section describes exceptions to those rules.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="document-all-top-level-exports-of-modules"></a>Document all top-level exports of modules<a class="hash-link" href="#document-all-top-level-exports-of-modules" title="Direct link to heading">#</a></h4><p>Use <code>/** JSDoc */</code> comments to communicate information to the users of your code. Avoid merely restating the property or parameter name. You <em>should</em> also document all properties and methods (exported/public or not) whose purpose is not immediately obvious from their name, as judged by your reviewer.</p><p>Exception: Symbols that are only exported to be consumed by tooling, such as @NgModule classes, do not require comments.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="omit-comments-that-are-redundant-with-typescript"></a>Omit comments that are redundant with TypeScript<a class="hash-link" href="#omit-comments-that-are-redundant-with-typescript" title="Direct link to heading">#</a></h4><p>For example, do not declare types in <code>@param</code> or <code>@return</code> blocks, do not write <code>@implements</code>, <code>@enum</code>, <code>@private</code> etc. on code that uses the <code>implements</code>, <code>enum</code>, <code>private</code> etc. keywords.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="do-not-use-override"></a>Do not use <code>@override</code><a class="hash-link" href="#do-not-use-override" title="Direct link to heading">#</a></h4><p>Do not use <code>@override</code> in TypeScript source code.</p><p><code>@override</code> is not enforced by the compiler, which is surprising and leads to annotations and implementation going out of sync. Including it purely for documentation purposes is confusing.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="make-comments-that-actually-add-information"></a>Make comments that actually add information<a class="hash-link" href="#make-comments-that-actually-add-information" title="Direct link to heading">#</a></h4><p>For non-exported symbols, sometimes the name and type of the function or parameter is enough. Code will <em>usually</em> benefit from more documentation than just variable names though!</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="avoid-comments-that-just-restate-the-parameter-name-and-type-eg"></a>Avoid comments that just restate the parameter name and type, e.g.<a class="hash-link" href="#avoid-comments-that-just-restate-the-parameter-name-and-type-eg" title="Direct link to heading">#</a></h5><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/** @param fooBarService The Bar service for the Foo application. */</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Because of this rule, <code>@param</code> and <code>@return</code> lines are only required when they add information, and may otherwise be omitted.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * POSTs the request to start coffee brewing.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param amountLitres The amount to brew. Must fit the pot size!</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">brew</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">amountLitres</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> logger</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Logger</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameter-property-comments"></a>Parameter property comments<a class="hash-link" href="#parameter-property-comments" title="Direct link to heading">#</a></h4><p>A parameter property is when a class declares a field and a constructor parameter in a single declaration, by marking a parameter in the constructor. E.g. <code>constructor(private readonly foo: Foo)</code>, declares that the class has a <code>foo</code> field.</p><p>To document these fields, use JSDoc&#x27;s <code>@param</code> annotation. Editors display the description on constructor calls and property accesses.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/** This class demonstrates how parameter properties are documented. */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">ParamProps</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * @param percolator The percolator used for brewing.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * @param beans The beans to brew.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> percolator</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Percolator</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> beans</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">CoffeeBean</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/** This class demonstrates how ordinary fields are documented. */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">OrdinaryClass</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/** The bean that will be used in the next call to brew(). */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  nextBean</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">CoffeeBean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialBean</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">CoffeeBean</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">nextBean</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> initialBean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="comments-when-calling-a-function"></a>Comments when calling a function<a class="hash-link" href="#comments-when-calling-a-function" title="Direct link to heading">#</a></h4><p>If needed, document parameters at call sites inline using block comments. Also consider named parameters using object literals and destructuring. The exact formatting and placement of the comment is not prescribed.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Inline block comments for parameters that&#x27;d be hard to understand:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Percolator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">brew</span><span class="token punctuation" style="color:#393A34">(</span><span class="token comment" style="color:#999988;font-style:italic">/* amountLitres= */</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Also consider using named arguments and destructuring parameters (in brew&#x27;s declaration):</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Percolator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">brew</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">amountLitres</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/** An ancient {@link CoffeeBrewer} */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Percolator</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name">CoffeeBrewer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/**</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * Brews coffee.</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   * @param amountLitres The amount to brew. Must fit the pot size!</span></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">   */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">brew</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">amountLitres</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// This implementation creates terrible coffee, but whatever.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// TODO(b/12345): Improve percolator brewing.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="place-documentation-prior-to-decorators"></a>Place documentation prior to decorators<a class="hash-link" href="#place-documentation-prior-to-decorators" title="Direct link to heading">#</a></h4><p>When a class, method, or property have both decorators like <code>@Component</code> and JsDoc, please make sure to write the JsDoc before the decorator.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="do-not-write-jsdoc-between-the-decorator-and-the-decorated-statement"></a>Do not write JsDoc between the Decorator and the decorated statement.<a class="hash-link" href="#do-not-write-jsdoc-between-the-decorator-and-the-decorated-statement" title="Direct link to heading">#</a></h5><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Component</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  template</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;bar&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/** Component that prints &quot;bar&quot;. */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">FooComponent</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="write-the-jsdoc-block-before-the-decorator"></a>Write the JsDoc block before the Decorator.<a class="hash-link" href="#write-the-jsdoc-block-before-the-decorator" title="Direct link to heading">#</a></h5><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/** Component that prints &quot;bar&quot;. */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Component</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  template</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;bar&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">FooComponent</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="language-rules"></a>Language Rules<a class="hash-link" href="#language-rules" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="visibility"></a>Visibility<a class="hash-link" href="#visibility" title="Direct link to heading">#</a></h3><p>Restricting visibility of properties, methods, and entire types helps with keeping code decoupled.</p><ul><li>Limit symbol visibility as much as possible.</li><li>Consider converting private methods to non-exported functions within the same file but outside of any class, and moving private properties into a separate, non-exported class.</li><li>TypeScript symbols are public by default. Never use the <code>public</code> modifier except when declaring non-readonly public parameter properties (in constructors).</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> bar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Bar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// BAD: public modifier not needed</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> baz</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Baz</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// BAD: readonly implies it&#x27;s a property which defaults to public</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  bar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Bar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// GOOD: public modifier not needed</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> baz</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Baz</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// public modifier allowed</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>See also <a href="#export-visibility">export visibility</a> below.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="constructors"></a>Constructors<a class="hash-link" href="#constructors" title="Direct link to heading">#</a></h3><p>Constructor calls must use parentheses, even when no arguments are passed:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">Bad</div><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Foo</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">Good</div><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It is unnecessary to provide an empty constructor or one that simply delegates into its parent class because ES2015 provides a default class constructor if one is not specified. However constructors with parameter properties, modifiers or parameter decorators should not be omitted even if the body of the constructor is empty.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class UnnecessaryConstructor {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  constructor() {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class UnnecessaryConstructorOverride extends Base {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor(value: number) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      super(value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class DefaultConstructor {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class ParameterProperties {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  constructor(private myService) {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class ParameterDecorators {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  constructor(@SideEffectDecorator myService) {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class NoInstantiation {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private constructor() {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="class-members"></a>Class Members<a class="hash-link" href="#class-members" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="no-private-fields"></a>No <code>#private</code> fields<a class="hash-link" href="#no-private-fields" title="Direct link to heading">#</a></h4><p>Do not use private fields (also known as private identifiers):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Clazz {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  #ident = 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Instead, use TypeScript&#x27;s visibility annotations:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Clazz {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private ident = 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Why?</p><p>Private identifiers cause substantial emit size and performance regressions when down-leveled by TypeScript, and are unsupported before ES2015. They can only be downleveled to ES2015, not lower. At the same time, they do not offer substantial benefits when static type checking is used to enforce visibility.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="use-readonly"></a>Use <code>readonly</code><a class="hash-link" href="#use-readonly" title="Direct link to heading">#</a></h4><p>Mark properties that are never reassigned outside of the constructor with the <code>readonly</code> modifier (these need not be deeply immutable).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="parameter-properties"></a>Parameter properties<a class="hash-link" href="#parameter-properties" title="Direct link to heading">#</a></h4><p>Rather than plumbing an obvious initializer through to a class member, use a TypeScript <a href="https://www.typescriptlang.org/docs/handbook/classes.html#parameter-properties" target="_blank" rel="noopener noreferrer">parameter property</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private readonly barService: BarService;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  constructor(barService: BarService) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.barService = barService;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  constructor(private readonly barService: BarService) {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If the parameter property needs documentation, <a href="#parameter-property-comments">use an <code>@param</code> JSDoc tag</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="field-initializers"></a>Field initializers<a class="hash-link" href="#field-initializers" title="Direct link to heading">#</a></h4><p>If a class member is not a parameter, initialize it where it&#x27;s declared, which sometimes lets you drop the constructor entirely.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private readonly userList: string[];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  constructor() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.userList = [];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private readonly userList: string[] = [];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="properties-used-outside-of-class-lexical-scope"></a>Properties used outside of class lexical scope<a class="hash-link" href="#properties-used-outside-of-class-lexical-scope" title="Direct link to heading">#</a></h4><p>Properties used from outside the lexical scope of their containing class, such as an AngularJS controller&#x27;s properties used from a template, must not use <code>private</code> visibility, as they are used outside of the lexical scope of their containing class.</p><p>Prefer <code>public</code> visibility for these properties, however <code>protected</code> visibility can also be used as needed. For example, Angular and Polymer template properties should use <code>public</code>, but AngularJS should use <code>protected</code>.</p><p>TypeScript code must not not use <code>obj[&#x27;foo&#x27;]</code> to bypass the visibility of a property</p><p>Why?</p><p>When a property is <code>private</code>, you are declaring to both automated systems and humans that the property accesses are scoped to the methods of the declaring class, and they will rely on that. For example, a check for unused code will flag a private property that appears to be unused, even if some other file manages to bypass the visibility restriction.</p><p>Though it may appear that <code>obj[&#x27;foo&#x27;]</code> can bypass visibility in the TypeScript compiler, this pattern can be broken by rearranging the build rules, and also violates <a href="#optimization-compatibility">optimization compatibility</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getters-and-setters-accessors"></a>Getters and Setters (Accessors)<a class="hash-link" href="#getters-and-setters-accessors" title="Direct link to heading">#</a></h4><p>Getters and setters for class members may be used. The getter method must be a <a href="https://en.wikipedia.org/wiki/Pure_function" target="_blank" rel="noopener noreferrer">pure function</a> (i.e., result is consistent and has no side effects). They are also useful as a means of restricting the visibility of internal or verbose implementation details (shown below).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  constructor(private readonly someService: SomeService) {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  get someMember(): string {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return this.someService.someVariable;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  set someMember(newValue: string) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.someService.someVariable = newValue;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If an accessor is used to hide a class property, the hidden property may be prefixed or suffixed with any whole word, like <code>internal</code> or <code>wrapped</code>. When using these private properties, access the value through the accessor whenever possible. At least one accessor for a property must be non-trivial: do not define pass-through accessors only for the purpose of hiding a property. Instead, make the property public (or consider making it <code>readonly</code> rather than just defining a getter with no setter).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private wrappedBar = &#x27;&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  get bar() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return this.wrappedBar || &#x27;bar&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  set bar(wrapped: string) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.wrappedBar = wrapped.trim();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class Bar {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private barInternal = &#x27;&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Neither of these accessors have logic, so just make bar public.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  get bar() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return this.barInternal;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  set bar(value: string) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.barInternal = value;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="primitive-types--wrapper-classes"></a>Primitive Types &amp; Wrapper Classes<a class="hash-link" href="#primitive-types--wrapper-classes" title="Direct link to heading">#</a></h3><p>TypeScript code must not instantiate the wrapper classes for the primitive types <code>String</code>, <code>Boolean</code>, and <code>Number</code>. Wrapper classes have surprising behaviour, such as <code>new Boolean(false)</code> evaluating to <code>true</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const s = new String(&#x27;hello&#x27;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const b = new Boolean(false);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const n = new Number(5);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const s = &#x27;hello&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const b = false;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const n = 5;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="array-constructor"></a>Array constructor<a class="hash-link" href="#array-constructor" title="Direct link to heading">#</a></h3><p>TypeScript code must not use the <code>Array()</code> constructor, with or without <code>new</code>. It has confusing and contradictory usage:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const a = new Array(2); // [undefined, undefined]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const b = new Array(2, 3); // [2, 3];</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Instead, always use bracket notation to initialize arrays, or <code>from</code> to initialize an <code>Array</code> with a certain size:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const a = [2];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const b = [2, 3];</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Equivalent to Array(2):</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const c = [];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">c.length = 2;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// [0, 0, 0, 0, 0]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Array.from&lt;number&gt;({length: 5}).fill(0);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="type-coercion"></a>Type coercion<a class="hash-link" href="#type-coercion" title="Direct link to heading">#</a></h3><p>TypeScript code may use the <code>String()</code> and <code>Boolean()</code> (note: no <code>new</code>!) functions, string template literals, or <code>!!</code> to coerce types.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const bool = Boolean(false);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const str = String(aNumber);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const bool2 = !!str;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const str2 = `result: ${bool2}`;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Using string concatenation to cast to string is discouraged, as we check that operands to the plus operator are of matching types.</p><p>Code must use <code>Number()</code> to parse numeric values, and <em>must</em> check its return for <code>NaN</code> values explicitly, unless failing to parse is impossible from context.</p><p>Note: <code>Number(&#x27;&#x27;)</code>, <code>Number(&#x27; &#x27;)</code>, and <code>Number(&#x27;\t&#x27;)</code> would return <code>0</code> instead of <code>NaN</code>. <code>Number(&#x27;Infinity&#x27;)</code> and <code>Number(&#x27;-Infinity&#x27;)</code> would return <code>Infinity</code> and <code>-Infinity</code> respectively. These cases may require special handling.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const aNumber = Number(&#x27;123&#x27;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (isNaN(aNumber)) throw new Error(...);  // Handle NaN if the string might not contain a number</span></span><span class="token-line" style="color:#393A34"><span class="token plain">assertFinite(aNumber, ...);                // Optional: if NaN cannot happen because it was validated before.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Code must not use unary plus (<code>+</code>) to coerce strings to numbers. Parsing numbers can fail, has surprising corner cases, and can be a code smell (parsing at the wrong layer). A unary plus is too easy to miss in code reviews given this.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const x = +y;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Code must also not use <code>parseInt</code> or <code>parseFloat</code> to parse numbers, except for non-base-10 strings (see below). Both of those functions ignore trailing characters in the string, which can shadow error conditions (e.g. parsing <code>12 dwarves</code> as <code>12</code>).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const n = parseInt(someString, 10);  // Error prone,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const f = parseFloat(someString);    // regardless of passing a radix.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Code that must parse using a radix <em>must</em> check that its input is a number before calling into <code>parseInt</code>;</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">if (!/^[a-fA-F0-9]+$/.test(someString)) throw new Error(...);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Needed to parse hexadecimal.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// tslint:disable-next-line:ban</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const n = parseInt(someString, 16);  // Only allowed for radix != 10</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Use <code>Number()</code> followed by <code>Math.floor</code> or <code>Math.trunc</code> (where available) to parse integer numbers:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">let f = Number(someString);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (isNaN(f)) handleError();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">f = Math.floor(f);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Do not use explicit boolean coercions in conditional clauses that have implicit boolean coercion. Those are the conditions in an <code>if</code>, <code>for</code> and <code>while</code> statements.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const foo: MyInterface|null = ...;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (!!foo) {...}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">while (!!foo) {...}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const foo: MyInterface|null = ...;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (foo) {...}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">while (foo) {...}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Code may use explicit comparisons:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Explicitly comparing &gt; 0 is OK:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (arr.length &gt; 0) {...}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// so is relying on boolean coercion:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (arr.length) {...}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="variables"></a>Variables<a class="hash-link" href="#variables" title="Direct link to heading">#</a></h3><p>Always use <code>const</code> or <code>let</code> to declare variables. Use <code>const</code> by default, unless a variable needs to be reassigned. Never use <code>var</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const foo = otherValue;  // Use if &quot;foo&quot; never changes.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">let bar = someValue;     // Use if &quot;bar&quot; is ever assigned into later on.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>const</code> and <code>let</code> are block scoped, like variables in most other languages. <code>var</code> in JavaScript is function scoped, which can cause difficult to understand bugs. Don&#x27;t use it.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">var foo = someValue;     // Don&#x27;t use - var scoping is complex and causes bugs.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Variables must not be used before their declaration.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="exceptions"></a>Exceptions<a class="hash-link" href="#exceptions" title="Direct link to heading">#</a></h3><p>Always use <code>new Error()</code> when instantiating exceptions, instead of just calling <code>Error()</code>. Both forms create a new <code>Error</code> instance, but using <code>new</code> is more consistent with how other objects are instantiated.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">throw new Error(&#x27;Foo is not a valid bar.&#x27;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">throw Error(&#x27;Foo is not a valid bar.&#x27;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="iterating-objects"></a>Iterating objects<a class="hash-link" href="#iterating-objects" title="Direct link to heading">#</a></h3><p>Iterating objects with <code>for (... in ...)</code> is error prone. It will include enumerable properties from the prototype chain.</p><p>Do not use unfiltered <code>for (... in ...)</code> statements:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">for (const x in someObj) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // x could come from some parent prototype!</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Either filter values explicitly with an <code>if</code> statement, or use <code>for (... of Object.keys(...))</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">for (const x in someObj) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  if (!someObj.hasOwnProperty(x)) continue;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // now x was definitely defined on someObj</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">for (const x of Object.keys(someObj)) { // note: for _of_!</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // now x was definitely defined on someObj</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">for (const [key, value] of Object.entries(someObj)) { // note: for _of_!</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // now key was definitely defined on someObj</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="iterating-containers"></a>Iterating containers<a class="hash-link" href="#iterating-containers" title="Direct link to heading">#</a></h3><p>Do not use <code>for (... in ...)</code> to iterate over arrays. It will counterintuitively give the array&#x27;s indices (as strings!), not values:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">for (const x in someArray) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // x is the index!</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Use <code>for (... of someArr)</code> or vanilla <code>for</code> loops with indices to iterate over arrays.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">for (const x of someArr) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // x is a value of someArr.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">for (let i = 0; i &lt; someArr.length; i++) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Explicitly count if the index is needed, otherwise use the for/of form.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  const x = someArr[i];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">for (const [i, x] of someArr.entries()) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Alternative version of the above.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Do not use <code>Array.prototype.forEach</code>, <code>Set.prototype.forEach</code>, and <code>Map.prototype.forEach</code>. They make code harder to debug and defeat some useful compiler checks (e.g. reachability).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">someArr.forEach((item, index) =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  someFn(item, index);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Why?</p><p>Consider this code:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">let x: string|null = &#x27;abc&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">myArray.forEach(() =&gt; { x.charAt(0); });</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can recognize that this code is fine: <code>x</code> isn&#x27;t null and it doesn&#x27;t change before it is accessed. But the compiler cannot know that this <code>.forEach()</code> call doesn&#x27;t hang on to the closure that was passed in and call it at some later point, maybe after <code>x</code> was set to null, so it flags this code as an error. The equivalent for-of loop is fine.</p><p><a href="https://www.typescriptlang.org/play?#code/DYUwLgBAHgXBDOYBOBLAdgcwD5oK7GAgF4IByAQwCMBjUgbgCgBtAXQDoAzAeyQFFzqACwAUwgJTEAfBADeDCNDZDySAIJhhABjGMAvjoYNQkAJ5xEqTDnyESFGvQbckEYdS5pEEAPoQuHCFYJOQUTJUEVdS0DXQYgA" target="_blank" rel="noopener noreferrer">See the error and non-error in the playground</a></p><p>In practice, variations of this limitation of control flow analysis show up in more complex codepaths where it is more surprising.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="using-the-spread-operator"></a>Using the spread operator<a class="hash-link" href="#using-the-spread-operator" title="Direct link to heading">#</a></h3><p>Using the spread operator <code>[...foo]; {...bar}</code> is a convenient shorthand for copying arrays and objects. When using the spread operator on objects, later values replace earlier values at the same key.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const foo = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  num: 1,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const foo2 = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...foo,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  num: 5,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const foo3 = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  num: 5,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...foo,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">foo2.num === 5;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">foo3.num === 1;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>When using the spread operator, the value being spread must match what is being created. That is, when creating an object, only objects may be used with the spread operator; when creating an array, only spread iterables. Primitives, including <code>null</code> and <code>undefined</code>, may never be spread.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const foo = {num: 7};</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const bar = {num: 5, ...(shouldUseFoo &amp;&amp; foo)}; // might be undefined</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Creates {0: &#x27;a&#x27;, 1: &#x27;b&#x27;, 2: &#x27;c&#x27;} but has no length</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const fooStrings = [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const ids = {...fooStrings};</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const foo = shouldUseFoo ? {num: 7} : {};</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const bar = {num: 5, ...foo};</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const fooStrings = [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const ids = [...fooStrings, &#x27;d&#x27;, &#x27;e&#x27;];</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="control-flow-statements--blocks"></a>Control flow statements &amp; blocks<a class="hash-link" href="#control-flow-statements--blocks" title="Direct link to heading">#</a></h3><p>Control flow statements spanning multiple lines always use blocks for the containing code.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">for (let i = 0; i &lt; x; i++) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  doSomethingWith(i);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  andSomeMore();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (x) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  doSomethingWithALongMethodName(x);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (x)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  x.doFoo();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">for (let i = 0; i &lt; x; i++)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  doSomethingWithALongMethodName(i);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The exception is that <code>if</code> statements fitting on one line may elide the block.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">if (x) x.doFoo();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="switch-statements"></a>Switch Statements<a class="hash-link" href="#switch-statements" title="Direct link to heading">#</a></h3><p>All <code>switch</code> statements must contain a <code>default</code> statement group, even if it contains no code.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">switch (x) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Y:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    doSomethingElse();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  default:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // nothing to do.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Non-empty statement groups (<code>case ...</code>) may not fall through (enforced by the compiler):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">switch (x) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  case X:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    doSomething();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // fall through - not allowed!</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Y:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Empty statement groups are allowed to fall through:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">switch (x) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  case X:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Y:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    doSomething();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  default: // nothing to do.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="equality-checks"></a>Equality Checks<a class="hash-link" href="#equality-checks" title="Direct link to heading">#</a></h3><p>Always use triple equals (<code>===</code>) and not equals (<code>!==</code>). The double equality operators cause error prone type coercions that are hard to understand and slower to implement for JavaScript Virtual Machines. See also the <a href="https://dorey.github.io/JavaScript-Equality-Table/" target="_blank" rel="noopener noreferrer">JavaScript equality table</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">if (foo == &#x27;bar&#x27; || baz != bam) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Hard to understand behaviour due to type coercion.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (foo === &#x27;bar&#x27; || baz !== bam) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // All good here.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>Exception</strong>: Comparisons to the literal <code>null</code> value may use the <code>==</code> and <code>!=</code> operators to cover both <code>null</code> and <code>undefined</code> values.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">if (foo == null) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Will trigger when foo is null or undefined.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="function-declarations"></a>Function Declarations<a class="hash-link" href="#function-declarations" title="Direct link to heading">#</a></h3><p>Use <code>function foo() { ... }</code> to declare named functions, including functions in nested scopes, e.g. within another function.</p><p>Use function declarations instead of assigning a function expression into a local variable (<code>const x = function() {...};</code>). TypeScript already disallows rebinding functions, so preventing overwriting a function declaration by using <code>const</code> is unnecessary.</p><p>Exception: Use arrow functions assigned to variables instead of function declarations if the function accesses the outer scope&#x27;s <code>this</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">function foo() { ... }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Given the above declaration, this won&#x27;t compile:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">foo = () =&gt; 3;  // ERROR: Invalid left-hand side of assignment expression.</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// So declarations like this are unnecessary.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const foo = function() { ... }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>Note the difference between function declarations (<code>function foo() {}</code>) discussed here, and function expressions (<code>doSomethingWith(function() {});</code>) discussed <a href="#function-expressions">below</a>.</p></blockquote><p>Top level arrow functions <em>may</em> be used to explicitly declare that a function implements an interface.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">interface SearchFunction {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  (source: string, subString: string): boolean;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const fooSearch: SearchFunction = (source, subString) =&gt; { ... };</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="function-expressions"></a>Function Expressions<a class="hash-link" href="#function-expressions" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="use-arrow-functions-in-expressions"></a>Use arrow functions in expressions<a class="hash-link" href="#use-arrow-functions-in-expressions" title="Direct link to heading">#</a></h4><p>Always use arrow functions instead of pre-ES6 function expressions defined with the <code>function</code> keyword.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">bar(() =&gt; { this.doSomething(); })</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">bar(function() { ... })</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Function expressions (defined with the <code>function</code> keyword) may only be used if code has to dynamically rebind the <code>this</code> pointer, but code <em>should not</em> rebind the <code>this</code> pointer in general. Code in regular functions (as opposed to arrow functions and methods) <em>should not</em> access <code>this</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="expression-bodies-vs-block-bodies"></a>Expression bodies vs block bodies<a class="hash-link" href="#expression-bodies-vs-block-bodies" title="Direct link to heading">#</a></h4><p>Use arrow functions with expressions or blocks as their body as appropriate.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Top level functions use function declarations.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function someFunction() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Block arrow function bodies, i.e. bodies with =&gt; { }, are fine:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  const receipts = books.map((b: Book) =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const receipt = payMoney(b.price);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    recordTransaction(receipt);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return receipt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  });</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Expression bodies are fine, too, if the return value is used:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  const longThings = myValues.filter(v =&gt; v.length &gt; 1000).map(v =&gt; String(v));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  function payMoney(amount: number) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // function declarations are fine, but don&#x27;t access `this` in them.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Only use an expression body if the return value of the function is actually used.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// BAD: use a block ({ ... }) if the return value of the function is not used.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">myPromise.then(v =&gt; console.log(v));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// GOOD: return value is unused, use a block body.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">myPromise.then(v =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(v);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// GOOD: code may use blocks for readability.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const transformed = [1, 2, 3].map(v =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  const intermediate = someComplicatedExpr(v);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  const more = acrossManyLines(intermediate);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return worthWrapping(more);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rebinding-this"></a>Rebinding <code>this</code><a class="hash-link" href="#rebinding-this" title="Direct link to heading">#</a></h4><p>Function expressions must not use <code>this</code> unless they specifically exist to rebind the <code>this</code> pointer. Rebinding <code>this</code> can in most cases be avoided by using arrow functions or explicit parameters.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">function clickHandler() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Bad: what&#x27;s `this` in this context?</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  this.textContent = &#x27;Hello&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Bad: the `this` pointer reference is implicitly set to document.body.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">document.body.onclick = clickHandler;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Good: explicitly reference the object from an arrow function.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">document.body.onclick = () =&gt; { document.body.textContent = &#x27;hello&#x27;; };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Alternatively: take an explicit parameter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const setTextFn = (e: HTMLElement) =&gt; { e.textContent = &#x27;hello&#x27;; };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">document.body.onclick = setTextFn.bind(null, document.body);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="arrow-functions-as-properties"></a>Arrow functions as properties<a class="hash-link" href="#arrow-functions-as-properties" title="Direct link to heading">#</a></h4><p>Classes usually <em>should not</em> contain properties initialized to arrow functions. Arrow function properties require the calling function to understand that the callee&#x27;s <code>this</code> is already bound, which increases confusion about what <code>this</code> is, and call sites and references using such handlers look broken (i.e. require non-local knowledge to determine that they are correct). Code <em>should</em> always use arrow functions to call instance methods (<code>const handler = (x) =&gt; { this.listener(x); };</code>), and <em>should not</em> obtain or pass references to instance methods (<code>const handler = this.listener; handler(x);</code>).</p><blockquote><p>Note: in some specific situations, e.g. when binding functions in a template, arrow functions as properties are useful and create much more readable code. Use judgement with this rule. Also, see the <a href="#event-handlers"><code>Event Handlers</code></a> section below.</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class DelayHandler {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  constructor() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Problem: `this` is not preserved in the callback. `this` in the callback</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // will not be an instance of DelayHandler.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimeout(this.patienceTracker, 5000);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private patienceTracker() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.waitedPatiently = true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Arrow functions usually should not be properties.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class DelayHandler {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  constructor() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Bad: this code looks like it forgot to bind `this`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimeout(this.patienceTracker, 5000);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private patienceTracker = () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.waitedPatiently = true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Explicitly manage `this` at call time.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class DelayHandler {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  constructor() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Use anonymous functions if possible.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimeout(() =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.patienceTracker();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, 5000);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private patienceTracker() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.waitedPatiently = true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="event-handlers"></a>Event Handlers<a class="hash-link" href="#event-handlers" title="Direct link to heading">#</a></h4><p>Event handlers <em>may</em> use arrow functions when there is no need to uninstall the handler (for example, if the event is emitted by the class itself). If the handler must be uninstalled, arrow function properties are the right approach, because they automatically capture <code>this</code> and provide a stable reference to uninstall.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Event handlers may be anonymous functions or arrow function properties.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class Component {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  onAttached() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The event is emitted by this class, no need to uninstall.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    this.addEventListener(&#x27;click&#x27;, () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      this.listener();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // this.listener is a stable reference, we can uninstall it later.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    window.addEventListener(&#x27;onbeforeunload&#x27;, this.listener);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  onDetached() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The event is emitted by window. If we don&#x27;t uninstall, this.listener will</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // keep a reference to `this` because it&#x27;s bound, causing a memory leak.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    window.removeEventListener(&#x27;onbeforeunload&#x27;, this.listener);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // An arrow function stored in a property is bound to `this` automatically.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private listener = () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    confirm(&#x27;Do you want to exit the page?&#x27;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Do not use <code>bind</code> in the expression that installs an event handler, because it creates a temporary reference that can&#x27;t be uninstalled.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Binding listeners creates a temporary reference that prevents uninstalling.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class Component {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  onAttached() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // This creates a temporary reference that we won&#x27;t be able to uninstall</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    window.addEventListener(&#x27;onbeforeunload&#x27;, this.listener.bind(this));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  onDetached() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // This bind creates a different reference, so this line does nothing.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    window.removeEventListener(&#x27;onbeforeunload&#x27;, this.listener.bind(this));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private listener() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    confirm(&#x27;Do you want to exit the page?&#x27;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="automatic-semicolon-insertion"></a>Automatic Semicolon Insertion<a class="hash-link" href="#automatic-semicolon-insertion" title="Direct link to heading">#</a></h3><p>Do not rely on Automatic Semicolon Insertion (ASI). Explicitly terminate all statements using a semicolon. This prevents bugs due to incorrect semicolon insertions and ensures compatibility with tools with limited ASI support (e.g. clang-format).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ts-ignore"></a>@ts-ignore<a class="hash-link" href="#ts-ignore" title="Direct link to heading">#</a></h3><p>Do not use <code>@ts-ignore</code>. It superficially seems to be an easy way to fix a compiler error, but in practice, a specific compiler error is often caused by a larger problem that can be fixed more directly.</p><p>For example, if you are using <code>@ts-ignore</code> to suppress a type error, then it&#x27;s hard to predict what types the surrounding code will end up seeing. For many type errors, the advice in <a href="#any">how to best use <code>any</code></a> is useful.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="type-and-non-nullability-assertions"></a>Type and Non-nullability Assertions<a class="hash-link" href="#type-and-non-nullability-assertions" title="Direct link to heading">#</a></h3><p>Type assertions (<code>x as SomeType</code>) and non-nullability assertions (<code>y!</code>) are unsafe. Both only silence the TypeScript compiler, but do not insert any runtime checks to match these assertions, so they can cause your program to crash at runtime.</p><p>Because of this, you <em>should not</em> use type and non-nullability assertions without an obvious or explicit reason for doing so.</p><p>Instead of the following:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">(x as Foo).foo();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">y!.bar();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>When you want to assert a type or non-nullability the best answer is to explicitly write a runtime check that performs that check.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// assuming Foo is a class.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (x instanceof Foo) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  x.foo();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">if (y) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  y.bar();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Sometimes due to some local property of your code you can be sure that the assertion form is safe. In those situations, you <em>should</em> add clarification to explain why you are ok with the unsafe behavior:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// x is a Foo, because ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">(x as Foo).foo();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// y cannot be null, because ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">y!.bar();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If the reasoning behind a type or non-nullability assertion is obvious, the comments may not be necessary. For example, generated proto code is always nullable, but perhaps it is well-known in the context of the code that certain fields are always provided by the backend. Use your judgement.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="type-assertions-syntax"></a>Type Assertions Syntax<a class="hash-link" href="#type-assertions-syntax" title="Direct link to heading">#</a></h4><p>Type assertions must use the <code>as</code> syntax (as opposed to the angle brackets syntax). This enforces parentheses around the assertion when accessing a member.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const x = (&lt;Foo&gt;z).length;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const y = &lt;Foo&gt;z.length;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const x = (z as Foo).length;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="type-assertions-and-object-literals"></a>Type Assertions and Object Literals<a class="hash-link" href="#type-assertions-and-object-literals" title="Direct link to heading">#</a></h4><p>Use type annotations (<code>: Foo</code>) instead of type assertions (<code>as Foo</code>) to specify the type of an object literal. This allows detecting refactoring bugs when the fields of an interface change over time.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">interface Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  bar: number;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  baz?: string;  // was &quot;bam&quot;, but later renamed to &quot;baz&quot;.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const foo = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  bar: 123,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  bam: &#x27;abc&#x27;,  // no error!</span></span><span class="token-line" style="color:#393A34"><span class="token plain">} as Foo;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function func() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar: 123,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bam: &#x27;abc&#x27;,  // no error!</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  } as Foo;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">interface Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  bar: number;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  baz?: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const foo: Foo = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  bar: 123,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  bam: &#x27;abc&#x27;,  // complains about &quot;bam&quot; not being defined on Foo.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function func(): Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar: 123,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bam: &#x27;abc&#x27;,   // complains about &quot;bam&quot; not being defined on Foo.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="member-property-declarations"></a>Member property declarations<a class="hash-link" href="#member-property-declarations" title="Direct link to heading">#</a></h3><p>Interface and class declarations must use the <code>;</code> character to separate individual member declarations:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">interface Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  memberA: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  memberB: number;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Interfaces specifically must not use the <code>,</code> character to separate fields, for symmetry with class declarations:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">interface Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  memberA: string,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  memberB: number,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Inline object type declarations must use the comma as a separator:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">type SomeTypeAlias = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  memberA: string,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  memberB: number,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">let someProperty: {memberC: string, memberD: number};</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="optimization-compatibility-for-property-access"></a>Optimization compatibility for property access<a class="hash-link" href="#optimization-compatibility-for-property-access" title="Direct link to heading">#</a></h4><p>Code must not mix quoted property access with dotted property access:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Bad: code must use either non-quoted or quoted access for any property</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// consistently across the entire application:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(x[&#x27;someField&#x27;]);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(x.someField);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Code must not rely on disabling renaming, but must rather declare all properties that are external to the application to prevent renaming:</p><p>Prefer for code to account for a possible property-renaming optimization, and declare all properties that are external to the application to prevent renaming:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Good: declaring an interface</span></span><span class="token-line" style="color:#393A34"><span class="token plain">declare interface ServerInfoJson {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  appVersion: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  user: UserJson;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const data = JSON.parse(serverResponse) as ServerInfoJson;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(data.appVersion); // Type safe &amp; renaming safe!</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="optimization-compatibility-for-module-object-imports"></a>Optimization compatibility for module object imports<a class="hash-link" href="#optimization-compatibility-for-module-object-imports" title="Direct link to heading">#</a></h4><p>When importing a module object, directly access properties on the module object rather than passing it around. This ensures that modules can be analyzed and optimized. Treating <a href="#module-versus-destructuring-imports">module imports</a> as namespaces is fine.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import {method1, method2} from &#x27;utils&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class A {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  readonly utils = {method1, method2};</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import * as utils from &#x27;utils&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class A {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  readonly utils = utils;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="exception"></a>Exception<a class="hash-link" href="#exception" title="Direct link to heading">#</a></h4><p>This optimization compatibility rule applies to all web apps. It does not apply to code that only runs server side (e.g. in NodeJS for a test runner). It is still strongly encouraged to always declare all types and avoid mixing quoted and unquoted property access, for code hygiene.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="enums"></a>Enums<a class="hash-link" href="#enums" title="Direct link to heading">#</a></h3><p>Always use <code>enum</code> and not <code>const enum</code>. TypeScript enums already cannot be mutated; <code>const enum</code> is a separate language feature related to optimization that makes the enum invisible to JavaScript users of the module.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="debugger-statements"></a>Debugger statements<a class="hash-link" href="#debugger-statements" title="Direct link to heading">#</a></h3><p>Debugger statements must not be included in production code.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">function debugMe() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  debugger;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="decorators"></a>Decorators<a class="hash-link" href="#decorators" title="Direct link to heading">#</a></h3><p>Decorators are syntax with an <code>@</code> prefix, like <code>@MyDecorator</code>.</p><p>Do not define new decorators. Only use the decorators defined by frameworks:</p><ul><li>Angular (e.g. <code>@Component</code>, <code>@NgModule</code>, etc.)</li><li>Polymer (e.g. <code>@property</code>)</li></ul><p>Why?</p><p>We generally want to avoid decorators, because they were an experimental feature that have since diverged from the TC39 proposal and have known bugs that won&#x27;t be fixed.</p><p>When using decorators, the decorator must immediately precede the symbol it decorates, with no empty lines between:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">/** JSDoc comments go before decorators */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component({...})  // Note: no empty line after the decorator.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class MyComp {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Input() myField: string;  // Decorators on fields may be on the same line...</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Input()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  myOtherField: string;  // ... or wrap.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="source-organization"></a>Source Organization<a class="hash-link" href="#source-organization" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="modules"></a>Modules<a class="hash-link" href="#modules" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="import-paths"></a>Import Paths<a class="hash-link" href="#import-paths" title="Direct link to heading">#</a></h4><p>TypeScript code must use paths to import other TypeScript code. Paths may be relative, i.e. starting with <code>.</code> or <code>..</code>, or rooted at the base directory, e.g. <code>root/path/to/file</code>.</p><p>Code <em>should</em> use relative imports (<code>./foo</code>) rather than absolute imports <code>path/to/foo</code> when referring to files within the same (logical) project.</p><p>Consider limiting the number of parent steps (<code>../../../</code>) as those can make module and path structures hard to understand.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import {Symbol1} from &#x27;google3/path/from/root&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import {Symbol2} from &#x27;../parent/file&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import {Symbol3} from &#x27;./sibling&#x27;;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="namespaces-vs-modules"></a>Namespaces vs Modules<a class="hash-link" href="#namespaces-vs-modules" title="Direct link to heading">#</a></h4><p>TypeScript supports two methods to organize code: <em>namespaces</em> and <em>modules</em>, but namespaces are disallowed. google3 code must use TypeScript <em>modules</em> (which are <a href="http://exploringjs.com/es6/ch_modules.html" target="_blank" rel="noopener noreferrer">ECMAScript 6 modules</a>). That is, your code <em>must</em> refer to code in other files using imports and exports of the form <code>import {foo} from &#x27;bar&#x27;;</code></p><p>Your code must not use the <code>namespace Foo { ... }</code> construct. <code>namespace</code>s may only be used when required to interface with external, third party code. To semantically namespace your code, use separate files.</p><p>Code must not use <code>require</code> (as in <code>import x = require(&#x27;...&#x27;);</code>) for imports. Use ES6 module syntax.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Bad: do not use namespaces:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace Rocket {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  function launch() { ... }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Bad: do not use &lt;reference&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/// &lt;reference path=&quot;...&quot;/&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Bad: do not use require()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import x = require(&#x27;mydep&#x27;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>NB: TypeScript <code>namespace</code>s used to be called internal modules and used to use the <code>module</code> keyword in the form <code>module Foo { ... }</code>. Don&#x27;t use that either. Always use ES6 imports.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="exports"></a>Exports<a class="hash-link" href="#exports" title="Direct link to heading">#</a></h3><p>Use named exports in all code:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Use named exports:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export class Foo { ... }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Do not use default exports. This ensures that all imports follow a uniform pattern.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Do not use default exports:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export default class Foo { ... } // BAD!</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Why?</p><p>Default exports provide no canonical name, which makes central maintenance difficult with relatively little benefit to code owners, including potentially decreased readability:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import Foo from &#x27;./bar&#x27;;  // Legal.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import Bar from &#x27;./bar&#x27;;  // Also legal.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Named exports have the benefit of erroring when import statements try to import something that hasn&#x27;t been declared. In <code>foo.ts</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const foo = &#x27;blah&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export default foo;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And in <code>bar.ts</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import {fizz} from &#x27;./foo&#x27;;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Results in <code>error TS2614: Module &#x27;&quot;./foo&quot;&#x27; has no exported member &#x27;fizz&#x27;.</code> While <code>bar.ts</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import fizz from &#x27;./foo&#x27;;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Results in <code>fizz === foo</code>, which is probably unexpected and difficult to debug.</p><p>Additionally, default exports encourage people to put everything into one big object to namespace it all together:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">export default class Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  static SOME_CONSTANT = ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  static someHelpfulFunction() { ... }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>With the above pattern, we have file scope, which can be used as a namespace. We also have a perhaps needless second scope (the class <code>Foo</code>) that can be ambiguously used as both a type and a value in other files.</p><p>Instead, prefer use of file scope for namespacing, as well as named exports:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">export const SOME_CONSTANT = ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export function someHelpfulFunction()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export class Foo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // only class stuff here</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="export-visibility"></a>Export visibility<a class="hash-link" href="#export-visibility" title="Direct link to heading">#</a></h4><p>TypeScript does not support restricting the visibility for exported symbols. Only export symbols that are used outside of the module. Generally minimize the exported API surface of modules.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="mutable-exports"></a>Mutable Exports<a class="hash-link" href="#mutable-exports" title="Direct link to heading">#</a></h4><p>Regardless of technical support, mutable exports can create hard to understand and debug code, in particular with re-exports across multiple modules. One way to paraphrase this style point is that <code>export let</code> is not allowed.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">export let foo = 3;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// In pure ES6, foo is mutable and importers will observe the value change after a second.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// In TS, if foo is re-exported by a second file, importers will not see the value change.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">window.setTimeout(() =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  foo = 4;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}, 1000 /* ms */);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If one needs to support externally accessible and mutable bindings, they should instead use explicit getter functions.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">let foo = 3;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">window.setTimeout(() =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  foo = 4;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}, 1000 /* ms */);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use an explicit getter to access the mutable export.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export function getFoo() { return foo; };</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For the common pattern of conditionally exporting either of two values, first do the conditional check, then the export. Make sure that all exports are final after the module&#x27;s body has executed.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">function pickApi() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  if (useOtherApi()) return OtherApi;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return RegularApi;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export const SomeApi = pickApi();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="container-classes"></a>Container Classes<a class="hash-link" href="#container-classes" title="Direct link to heading">#</a></h4><p>Do not create container classes with static methods or properties for the sake of namespacing.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">export class Container {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  static FOO = 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  static bar() { return 1; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Instead, export individual constants and functions:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">export const FOO = 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export function bar() { return 1; }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="imports-1"></a>Imports<a class="hash-link" href="#imports-1" title="Direct link to heading">#</a></h3><p>There are four variants of import statements in ES6 and TypeScript:</p><p>Import type</p><p>Example</p><p>Use for</p><p>module</p><p><code>import * as foo from &#x27;...&#x27;;</code></p><p>TypeScript imports</p><p>destructuring</p><p><code>import {SomeThing} from &#x27;...&#x27;;</code></p><p>TypeScript imports</p><p>default</p><p><code>import SomeThing from &#x27;...&#x27;;</code></p><p>Only for other external code that requires them</p><p>side-effect</p><p><code>import &#x27;...&#x27;;</code></p><p>Only to import libraries for their side-effects on load (such as custom elements)</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Good: choose between two options as appropriate (see below).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import * as ng from &#x27;@angular/core&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import {Foo} from &#x27;./foo&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Only when needed: default imports.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import Button from &#x27;Button&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Sometimes needed to import libraries for their side effects:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import &#x27;jasmine&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import &#x27;@polymer/paper-button&#x27;;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="module-versus-destructuring-imports"></a>Module versus destructuring imports<a class="hash-link" href="#module-versus-destructuring-imports" title="Direct link to heading">#</a></h4><p>Both module and destructuring imports have advantages depending on the situation.</p><p>Despite the <code>*</code>, a module import is not comparable to a wildcard import as seen in other languages. Instead, module imports give a name to the entire module and each symbol reference mentions the module, which can make code more readable and gives autocompletion on all symbols in a module. They also require less import churn (all symbols are available), fewer name collisions, and allow terser names in the module that&#x27;s imported. Module imports are particularly useful when using many different symbols from large APIs.</p><p>Destructuring imports give local names for each imported symbol. They allow terser code when using the imported symbol, which is particularly useful for very commonly used symbols, such as Jasmine&#x27;s <code>describe</code> and <code>it</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Bad: overlong import statement of needlessly namespaced names.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import {TableViewItem, TableViewHeader, TableViewRow, TableViewModel,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  TableViewRenderer} from &#x27;./tableview&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">let item: TableViewItem = ...;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Better: use the module for namespacing.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import * as tableview from &#x27;./tableview&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">let item: tableview.Item = ...;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import * as testing from &#x27;./testing&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// All tests will use the same three functions repeatedly.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// When importing only a few symbols that are used very frequently, also</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// consider importing the symbols directly (see below).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">testing.describe(&#x27;foo&#x27;, () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  testing.it(&#x27;bar&#x27;, () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    testing.expect(...);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    testing.expect(...);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  });</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Better: give local names for these common functions.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import {describe, it, expect} from &#x27;./testing&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">describe(&#x27;foo&#x27;, () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  it(&#x27;bar&#x27;, () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    expect(...);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    expect(...);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  });</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="renaming-imports"></a>Renaming imports<a class="hash-link" href="#renaming-imports" title="Direct link to heading">#</a></h4><p>Code <em>should</em> fix name collisions by using a module import or renaming the exports themselves. Code <em>may</em> rename imports (<code>import {SomeThing as SomeOtherThing}</code>) if needed.</p><p>Three examples where renaming can be helpful:</p><ol><li>If it&#x27;s necessary to avoid collisions with other imported symbols.</li><li>If the imported symbol name is generated.</li><li>If importing symbols whose names are unclear by themselves, renaming can improve code clarity. For example, when using RxJS the <code>from</code> function might be more readable when renamed to <code>observableFrom</code>.</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="import--export-type"></a>Import &amp; export type<a class="hash-link" href="#import--export-type" title="Direct link to heading">#</a></h4><p>Do not use <code>import type ... from</code> or <code>export type ... from</code>.</p><p>Note: this does not apply to exporting type definitions, i.e. <code>export type Foo = ...;</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import type {Foo} from &#x27;./foo&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export type {Bar} from &#x27;./bar&#x27;;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Instead, just use regular imports:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import {Foo} from &#x27;./foo&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export {Bar} from &#x27;./bar&#x27;;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>TypeScript tooling automatically distinguishes symbols used as types vs symbols used as values and only generates runtime loads for the latter.</p><p>Why?</p><p>TypeScript tooling automatically handles the distinction and does not insert runtime loads for type references. This gives a better developer UX: toggling back and forth between <code>import type</code> and <code>import</code> is bothersome. At the same time, <code>import type</code> gives no guarantees: your code might still have a hard dependency on some import through a different transitive path.</p><p>If you need to force a runtime load for side effects, use <code>import &#x27;...&#x27;;</code>. See</p><p><code>export type</code> might seem useful to avoid ever exporting a value symbol for an API. However it does not give guarantees either: downstream code might still import an API through a different path. A better way to split &amp; guarantee type vs value usages of an API is to actually split the symbols into e.g. <code>UserService</code> and <code>AjaxUserService</code>. This is less error prone and also better communicates intent.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="organize-by-feature"></a>Organize By Feature<a class="hash-link" href="#organize-by-feature" title="Direct link to heading">#</a></h3><p>Organize packages by feature, not by type. For example, an online shop <em>should</em> have packages named <code>products</code>, <code>checkout</code>, <code>backend</code>, not <code>views</code>, <code>models</code>, <code>controllers</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="type-system"></a>Type System<a class="hash-link" href="#type-system" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="type-inference"></a>Type Inference<a class="hash-link" href="#type-inference" title="Direct link to heading">#</a></h3><p>Code may rely on type inference as implemented by the TypeScript compiler for all type expressions (variables, fields, return types, etc). The google3 compiler flags reject code that does not have a type annotation and cannot be inferred, so all code is guaranteed to be typed (but might use the <code>any</code> type explicitly).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const x = 15;  // Type inferred.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Leave out type annotations for trivially inferred types: variables or parameters initialized to a <code>string</code>, <code>number</code>, <code>boolean</code>, <code>RegExp</code> literal or <code>new</code> expression.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const x: boolean = true;  // Bad: &#x27;boolean&#x27; here does not aid readability</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Bad: &#x27;Set&#x27; is trivially inferred from the initialization</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const x: Set&lt;string&gt; = new Set();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const x = new Set&lt;string&gt;();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For more complex expressions, type annotations can help with readability of the program. Whether an annotation is required is decided by the code reviewer.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-types"></a>Return types<a class="hash-link" href="#return-types" title="Direct link to heading">#</a></h4><p>Whether to include return type annotations for functions and methods is up to the code author. Reviewers <em>may</em> ask for annotations to clarify complex return types that are hard to understand. Projects <em>may</em> have a local policy to always require return types, but this is not a general TypeScript style requirement.</p><p>There are two benefits to explicitly typing out the implicit return values of functions and methods:</p><ul><li>More precise documentation to benefit readers of the code.</li><li>Surface potential type errors faster in the future if there are code changes that change the return type of the function.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="null-vs-undefined"></a>Null vs Undefined<a class="hash-link" href="#null-vs-undefined" title="Direct link to heading">#</a></h3><p>TypeScript supports <code>null</code> and <code>undefined</code> types. Nullable types can be constructed as a union type (<code>string|null</code>); similarly with <code>undefined</code>. There is no special syntax for unions of <code>null</code> and <code>undefined</code>.</p><p>TypeScript code can use either <code>undefined</code> or <code>null</code> to denote absence of a value, there is no general guidance to prefer one over the other. Many JavaScript APIs use <code>undefined</code> (e.g. <code>Map.get</code>), while many DOM and Google APIs use <code>null</code> (e.g. <code>Element.getAttribute</code>), so the appropriate absent value depends on the context.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nullableundefined-type-aliases"></a>Nullable/undefined type aliases<a class="hash-link" href="#nullableundefined-type-aliases" title="Direct link to heading">#</a></h4><p>Type aliases <em>must not</em> include <code>|null</code> or <code>|undefined</code> in a union type. Nullable aliases typically indicate that null values are being passed around through too many layers of an application, and this clouds the source of the original issue that resulted in <code>null</code>. They also make it unclear when specific values on a class or interface might be absent.</p><p>Instead, code <em>must</em> only add <code>|null</code> or <code>|undefined</code> when the alias is actually used. Code <em>should</em> deal with null values close to where they arise, using the above techniques.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Bad</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type CoffeeResponse = Latte|Americano|undefined;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class CoffeeService {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  getLatte(): CoffeeResponse { ... };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Better</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type CoffeeResponse = Latte|Americano;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class CoffeeService {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  getLatte(): CoffeeResponse|undefined { ... };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Best</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type CoffeeResponse = Latte|Americano;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class CoffeeService {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  getLatte(): CoffeeResponse {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return assert(fetchResponse(), &#x27;Coffee maker is broken, file a ticket&#x27;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="optionals-vs-undefined-type"></a>Optionals vs <code>|undefined</code> type<a class="hash-link" href="#optionals-vs-undefined-type" title="Direct link to heading">#</a></h4><p>In addition, TypeScript supports a special construct for optional parameters and fields, using <code>?</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">interface CoffeeOrder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sugarCubes: number;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  milk?: Whole|LowFat|HalfHalf;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function pourCoffee(volume?: Milliliter) { ... }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Optional parameters implicitly include <code>|undefined</code> in their type. However, they are different in that they can be left out when constructing a value or calling a method. For example, <code>{sugarCubes: 1}</code> is a valid <code>CoffeeOrder</code> because <code>milk</code> is optional.</p><p>Use optional fields (on interfaces or classes) and parameters rather than a <code>|undefined</code> type.</p><p>For classes preferably avoid this pattern altogether and initialize as many fields as possible.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class MyClass {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  field = &#x27;&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="structural-types-vs-nominal-types"></a>Structural Types vs Nominal Types<a class="hash-link" href="#structural-types-vs-nominal-types" title="Direct link to heading">#</a></h3><p>TypeScript&#x27;s type system is structural, not nominal. That is, a value matches a type if it has at least all the properties the type requires and the properties&#x27; types match, recursively.</p><p>Use structural typing where appropriate in your code. Outside of test code, use interfaces to define structural types, not classes. In test code it can be useful to have mock implementations structurally match the code under test without introducing an extra interface.</p><p>When providing a structural-based implementation, explicitly include the type at the declaration of the symbol (this allows more precise type checking and error reporting).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const foo: Foo = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  a: 123,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  b: &#x27;abc&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const badFoo = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  a: 123,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  b: &#x27;abc&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Why?</p><p>The badFoo object above relies on type inference. Additional fields could be added to badFoo and the type is inferred based on the object itself.</p><p>When passing a badFoo to a function that takes a Foo, the error will be at the function call site, rather than at the object declaration site. This is also useful when changing the surface of an interface across broad codebases.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">interface Animal {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sound: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function makeSound(animal: Animal) {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * &#x27;cat&#x27; has an inferred type of &#x27;{sound: string}&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const cat = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sound: &#x27;meow&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * &#x27;cat&#x27; does not meet the type contract required for the function, so the</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * TypeScript compiler errors here, which may be very far from where &#x27;cat&#x27; is</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * defined.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">makeSound(cat);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Horse has a structural type and the type error shows here rather than the</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * function call.  &#x27;horse&#x27; does not meet the type contract of &#x27;Animal&#x27;.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const horse: Animal = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sound: &#x27;niegh&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const dog: Animal = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sound: &#x27;bark&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: &#x27;MrPickles&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">makeSound(dog);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">makeSound(horse);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="interfaces-vs-type-aliases"></a>Interfaces vs Type Aliases<a class="hash-link" href="#interfaces-vs-type-aliases" title="Direct link to heading">#</a></h3><p>TypeScript supports <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-aliases" target="_blank" rel="noopener noreferrer">type aliases</a> for naming a type expression. This can be used to name primitives, unions, tuples, and any other types.</p><p>However, when declaring types for objects, use interfaces instead of a type alias for the object literal expression.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">interface User {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  firstName: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  lastName: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type User = {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  firstName: string,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  lastName: string,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Why?</p><p>These forms are nearly equivalent, so under the principle of just choosing one out of two forms to prevent variation, we should choose one. Additionally, there also <a href="https://ncjamieson.com/prefer-interfaces/" target="_blank" rel="noopener noreferrer">interesting technical reasons to prefer interface</a>. That page quotes the TypeScript team lead: Honestly, my take is that it should really just be interfaces for anything that they can model. There is no benefit to type aliases when there are so many issues around display/perf.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="arrayt-type"></a><code>Array&lt;T&gt;</code> Type<a class="hash-link" href="#arrayt-type" title="Direct link to heading">#</a></h3><p>For simple types (containing just alphanumeric characters and dot), use the syntax sugar for arrays, <code>T[]</code>, rather than the longer form <code>Array&lt;T&gt;</code>.</p><p>For anything more complex, use the longer form <code>Array&lt;T&gt;</code>.</p><p>This also applies for <code>readonly T[]</code> vs <code>ReadonlyArray&lt;T&gt;</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const a: string[];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const b: readonly string[];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const c: ns.MyObj[];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const d: Array&lt;string|number&gt;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const e: ReadonlyArray&lt;string|number&gt;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const f: Array&lt;string&gt;;            // the syntax sugar is shorter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const g: ReadonlyArray&lt;string&gt;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const h: {n: number, s: string}[]; // the braces/parens make it harder to read</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const i: (string|number)[];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const j: readonly (string|number)[];</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="indexable-key-string-number-type"></a>Indexable (<code>{[key: string]: number}</code>) Type<a class="hash-link" href="#indexable-key-string-number-type" title="Direct link to heading">#</a></h3><p>In JavaScript, it&#x27;s common to use an object as an associative array (aka map, hash, or dict):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const fileSizes: {[fileName: string]: number} = {};</span></span><span class="token-line" style="color:#393A34"><span class="token plain">fileSizes[&#x27;readme.txt&#x27;] = 541;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In TypeScript, provide a meaningful label for the key. (The label only exists for documentation; it&#x27;s unused otherwise.)</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const users: {[key: string]: number} = ...;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const users: {[userName: string]: number} = ...;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>Rather than using one of these, consider using the ES6 <code>Map</code> and <code>Set</code> types instead. JavaScript objects have <a href="http://2ality.com/2012/01/objects-as-maps.html" target="_blank" rel="noopener noreferrer">surprising undesirable behaviors</a> and the ES6 types more explicitly convey your intent. Also, <code>Map</code>s can be keyed byâ€”and <code>Set</code>s can containâ€”types other than <code>string</code>.</p></blockquote><p>TypeScript&#x27;s builtin <code>Record&lt;Keys, ValueType&gt;</code> type allows constructing types with a defined set of keys. This is distinct from associative arrays in that the keys are statically known. See advice on that <a href="#mapped-conditional-types">below</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="mapped--conditional-types"></a>Mapped &amp; Conditional Types<a class="hash-link" href="#mapped--conditional-types" title="Direct link to heading">#</a></h3><p>TypeScript&#x27;s <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types" target="_blank" rel="noopener noreferrer">mapped types</a> and <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html#conditional-types" target="_blank" rel="noopener noreferrer">conditional types</a> allow specifying new types based on other types. TypeScript&#x27;s standard library includes several type operators based on these (<code>Record</code>, <code>Partial</code>, <code>Readonly</code> etc).</p><p>These type system features allow succinctly specifying types and constructing powerful yet type safe abstractions. They come with a number of drawbacks though:</p><ul><li>Compared to explicitly specifying properties and type relations (e.g. using interfaces and extension, see below for an example), type operators require the reader to mentally evaluate the type expression. This can make programs substantially harder to read, in particular combined with type inference and expressions crossing file boundaries.</li><li>Mapped &amp; conditional types&#x27; evaluation model, in particular when combined with type inference, is underspecified, not always well understood, and often subject to change in TypeScript compiler versions. Code can accidentally compile or seem to give the right results. This increases future support cost of code using type operators.</li><li>Mapped &amp; conditional types are most powerful when deriving types from complex and/or inferred types. On the flip side, this is also when they are most prone to create hard to understand and maintain programs.</li><li>Some language tooling does not work well with these type system features. E.g. your IDE&#x27;s find references (and thus rename property refactoring) will not find properties in a <code>Pick&lt;T, Keys&gt;</code> type, and Code Search won&#x27;t hyperlink them.</li></ul><p>The style recommendation is:</p><ul><li>Always use the simplest type construct that can possibly express your code.</li><li>A little bit of repetition or verbosity is often much cheaper than the long term cost of complex type expressions.</li><li>Mapped &amp; conditional types may be used, subject to these considerations.</li></ul><p>For example, TypeScript&#x27;s builtin <code>Pick&lt;T, Keys&gt;</code> type allows creating a new type by subsetting another type <code>T</code>, but simple interface extension can often be easier to understand.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">interface User {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  shoeSize: number;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  favoriteIcecream: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  favoriteChocolate: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// FoodPreferences has favoriteIcecream and favoriteChocolate, but not shoeSize.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type FoodPreferences = Pick&lt;User, &#x27;favoriteIcecream&#x27;|&#x27;favoriteChocolate&#x27;&gt;;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This is equivalent to spelling out the properties on <code>FoodPreferences</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">interface FoodPreferences {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  favoriteIcecream: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  favoriteChocolate: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To reduce duplication, <code>User</code> could extend <code>FoodPreferences</code>, or (possibly better) nest a field for food preferences:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">interface FoodPreferences { /* as above */ }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">interface User extends FoodPreferences {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  shoeSize: number;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // also includes the preferences.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Using interfaces here makes the grouping of properties explicit, improves IDE support, allows better optimization, and arguably makes the code easier to understand.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="any-type"></a><code>any</code> Type<a class="hash-link" href="#any-type" title="Direct link to heading">#</a></h3><p>TypeScript&#x27;s <code>any</code> type is a super and subtype of all other types, and allows dereferencing all properties. As such, <code>any</code> is dangerous - it can mask severe programming errors, and its use undermines the value of having static types in the first place.</p><p><strong>Consider <em>not</em> to use <code>any</code>.</strong> In circumstances where you want to use <code>any</code>, consider one of:</p><ul><li><a href="#any-specific">Provide a more specific type</a></li><li><a href="#any-unknown">Use <code>unknown</code></a></li><li><a href="#any-suppress">Suppress the lint warning and document why</a></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="providing-a-more-specific-type"></a>Providing a more specific type<a class="hash-link" href="#providing-a-more-specific-type" title="Direct link to heading">#</a></h4><p>Use interfaces , an inline object type, or a type alias:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Use declared interfaces to represent server-side JSON.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">declare interface MyUserJson {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  email: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use type aliases for types that are repetitive to write.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type MyType = number|string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Or use inline object types for complex returns.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function getTwoThings(): {something: number, other: string} {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return {something, other};</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use a generic type, where otherwise a library would say `any` to represent</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// they don&#x27;t care what type the user is operating on (but note &quot;Return type</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// only generics&quot; below).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function nicestElement&lt;T&gt;(items: T[]): T {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Find the nicest element in items.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Code can also put constraints on T, e.g. &lt;T extends HTMLElement&gt;.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="using-unknown-over-any"></a>Using <code>unknown</code> over <code>any</code><a class="hash-link" href="#using-unknown-over-any" title="Direct link to heading">#</a></h4><p>The <code>any</code> type allows assignment into any other type and dereferencing any property off it. Often this behaviour is not necessary or desirable, and code just needs to express that a type is unknown. Use the built-in type <code>unknown</code> in that situation â€” it expresses the concept and is much safer as it does not allow dereferencing arbitrary properties.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// Can assign any value (including null or undefined) into this but cannot</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// use it without narrowing the type or casting.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const val: unknown = value;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const danger: any = value /* result of an arbitrary expression */;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">danger.whoops();  // This access is completely unchecked!</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To safely use <code>unknown</code> values, narrow the type using a <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-guards-and-differentiating-types" target="_blank" rel="noopener noreferrer">type guard</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="suppressing-any-lint-warnings"></a>Suppressing <code>any</code> lint warnings<a class="hash-link" href="#suppressing-any-lint-warnings" title="Direct link to heading">#</a></h4><p>Sometimes using <code>any</code> is legitimate, for example in tests to construct a mock object. In such cases, add a comment that suppresses the lint warning, and document why it is legitimate.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// This test only needs a partial implementation of BookService, and if</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// we overlooked something the test will fail in an obvious way.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// This is an intentionally unsafe partial mock</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// tslint:disable-next-line:no-any</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const mockBookService = ({get() { return mockBook; }} as any) as BookService;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Shopping cart is not used in this test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// tslint:disable-next-line:no-any</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const component = new MyComponent(mockBookService, /* unused ShoppingCart */ null as any);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tuple-types"></a>Tuple Types<a class="hash-link" href="#tuple-types" title="Direct link to heading">#</a></h3><p>If you are tempted to create a Pair type, instead use a tuple type:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">interface Pair {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  first: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  second: string;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function splitInHalf(input: string): Pair {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return {first: x, second: y};</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function splitInHalf(input: string): [string, string] {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return [x, y];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use it like:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const [leftHalf, rightHalf] = splitInHalf(&#x27;my string&#x27;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>However, often it&#x27;s clearer to provide meaningful names for the properties.</p><p>If declaring an <code>interface</code> is too heavyweight, you can use an inline object literal type:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">function splitHostPort(address: string): {host: string, port: number} {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use it like:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const address = splitHostPort(userAddress);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">use(address.port);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// You can also get tuple-like behavior using destructuring:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const {host, port} = splitHostPort(userAddress);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="wrapper-types"></a>Wrapper types<a class="hash-link" href="#wrapper-types" title="Direct link to heading">#</a></h3><p>There are a few types related to JavaScript primitives that should never be used:</p><ul><li><code>String</code>, <code>Boolean</code>, and <code>Number</code> have slightly different meaning from the corresponding primitive types <code>string</code>, <code>boolean</code>, and <code>number</code>. Always use the lowercase version.</li><li><code>Object</code> has similarities to both <code>{}</code> and <code>object</code>, but is slightly looser. Use <code>{}</code> for a type that include everything except <code>null</code> and <code>undefined</code>, or lowercase <code>object</code> to further exclude the other primitive types (the three mentioned above, plus <code>symbol</code> and <code>bigint</code>).</li></ul><p>Further, never invoke the wrapper types as constructors (with <code>new</code>).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="return-type-only-generics"></a>Return type only generics<a class="hash-link" href="#return-type-only-generics" title="Direct link to heading">#</a></h3><p>Avoid creating APIs that have return type only generics. When working with existing APIs that have return type only generics always explicitly specify the generics.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="consistency"></a>Consistency<a class="hash-link" href="#consistency" title="Direct link to heading">#</a></h2><p>For any style question that isn&#x27;t settled definitively by this specification, do what the other code in the same file is already doing (be consistent). If that doesn&#x27;t resolve the question, consider emulating the other files in the same directory.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="goals"></a>Goals<a class="hash-link" href="#goals" title="Direct link to heading">#</a></h3><p>In general, engineers usually know best about what&#x27;s needed in their code, so if there are multiple options and the choice is situation dependent, we should let decisions be made locally. So the default answer should be leave it out.</p><p>The following points are the exceptions, which are the reasons we have some global rules. Evaluate your style guide proposal against the following:</p><ol><li><p><strong>Code should avoid patterns that are known to cause problems, especially for users new to the language.</strong></p><p>Examples:</p><ul><li>The <code>any</code> type is easy to misuse (is that variable <em>really</em> both a number and callable as a function?), so we have recommendations for how to use it.</li><li>TypeScript <code>namespace</code> causes trouble for Closure optimization.</li><li>Periods within filenames make them ugly/confusing to import from JavaScript.</li><li>Static functions in classes optimize confusingly, while often file-level functions accomplish the same goal.</li><li>Users unaware of the <code>private</code> keyword will attempt to obfuscate their function names with underscores.</li></ul></li><li><p><strong>Code across projects should be consistent across irrelevant variations.</strong></p><p>When there are two options that are equivalent in a superficial way, we should consider choosing one just so we don&#x27;t divergently evolve for no reason and avoid pointless debates in code reviews.</p><p>We should usually match JavaScript style as well, because people often write both languages together.</p><p>Examples:</p><ul><li>The capitalization style of names.</li><li><code>x as T</code> syntax vs the equivalent <code>&lt;T&gt;x</code> syntax (disallowed).</li><li><code>Array&lt;[number, number]&gt;</code> vs <code>[number, number][]</code>.</li></ul></li><li><p><strong>Code should be maintainable in the long term.</strong></p><p>Code usually lives longer than the original author works on it, and the TypeScript team must keep all of Google working into the future.</p><p>Examples:</p><ul><li>We use software to automate changes to code, so code is autoformatted so it&#x27;s easy for software to meet whitespace rules.</li><li>We require a single set of Closure compilation flags, so a given TS library can be written assuming a specific set of flags, and users can always safely use a shared library.</li><li>Code must import the libraries it uses (strict deps) so that a refactor in a dependency doesn&#x27;t change the dependencies of its users.</li><li>We ask users to write tests. Without tests we cannot have confidence that changes that we make to the language, or google3-wide library changes, don&#x27;t break users.</li></ul></li><li><p><strong>Code reviewers should be focused on improving the quality of the code, not enforcing arbitrary rules.</strong></p><p>If it&#x27;s possible to implement your rule as an automated check that is often a good sign. This also supports principle 3.</p><p>If it really just doesn&#x27;t matter that much -- if it&#x27;s an obscure corner of the language or if it avoids a bug that is unlikely to occur -- it&#x27;s probably worth leaving out.</p></li></ol></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/style-guides/typescript.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#syntax" class="table-of-contents__link">Syntax</a><ul><li><a href="#identifiers" class="table-of-contents__link">Identifiers</a></li><li><a href="#file-encoding-utf-8" class="table-of-contents__link">File encoding: UTF-8</a></li><li><a href="#comments--documentation" class="table-of-contents__link">Comments &amp; Documentation</a></li></ul></li><li><a href="#language-rules" class="table-of-contents__link">Language Rules</a><ul><li><a href="#visibility" class="table-of-contents__link">Visibility</a></li><li><a href="#constructors" class="table-of-contents__link">Constructors</a></li><li><a href="#class-members" class="table-of-contents__link">Class Members</a></li><li><a href="#primitive-types--wrapper-classes" class="table-of-contents__link">Primitive Types &amp; Wrapper Classes</a></li><li><a href="#array-constructor" class="table-of-contents__link">Array constructor</a></li><li><a href="#type-coercion" class="table-of-contents__link">Type coercion</a></li><li><a href="#variables" class="table-of-contents__link">Variables</a></li><li><a href="#exceptions" class="table-of-contents__link">Exceptions</a></li><li><a href="#iterating-objects" class="table-of-contents__link">Iterating objects</a></li><li><a href="#iterating-containers" class="table-of-contents__link">Iterating containers</a></li><li><a href="#using-the-spread-operator" class="table-of-contents__link">Using the spread operator</a></li><li><a href="#control-flow-statements--blocks" class="table-of-contents__link">Control flow statements &amp; blocks</a></li><li><a href="#switch-statements" class="table-of-contents__link">Switch Statements</a></li><li><a href="#equality-checks" class="table-of-contents__link">Equality Checks</a></li><li><a href="#function-declarations" class="table-of-contents__link">Function Declarations</a></li><li><a href="#function-expressions" class="table-of-contents__link">Function Expressions</a></li><li><a href="#automatic-semicolon-insertion" class="table-of-contents__link">Automatic Semicolon Insertion</a></li><li><a href="#ts-ignore" class="table-of-contents__link">@ts-ignore</a></li><li><a href="#type-and-non-nullability-assertions" class="table-of-contents__link">Type and Non-nullability Assertions</a></li><li><a href="#member-property-declarations" class="table-of-contents__link">Member property declarations</a></li><li><a href="#enums" class="table-of-contents__link">Enums</a></li><li><a href="#debugger-statements" class="table-of-contents__link">Debugger statements</a></li><li><a href="#decorators" class="table-of-contents__link">Decorators</a></li></ul></li><li><a href="#source-organization" class="table-of-contents__link">Source Organization</a><ul><li><a href="#modules" class="table-of-contents__link">Modules</a></li><li><a href="#exports" class="table-of-contents__link">Exports</a></li><li><a href="#imports-1" class="table-of-contents__link">Imports</a></li><li><a href="#organize-by-feature" class="table-of-contents__link">Organize By Feature</a></li></ul></li><li><a href="#type-system" class="table-of-contents__link">Type System</a><ul><li><a href="#type-inference" class="table-of-contents__link">Type Inference</a></li><li><a href="#null-vs-undefined" class="table-of-contents__link">Null vs Undefined</a></li><li><a href="#structural-types-vs-nominal-types" class="table-of-contents__link">Structural Types vs Nominal Types</a></li><li><a href="#interfaces-vs-type-aliases" class="table-of-contents__link">Interfaces vs Type Aliases</a></li><li><a href="#arrayt-type" class="table-of-contents__link"><code>Array&lt;T&gt;</code> Type</a></li><li><a href="#indexable-key-string-number-type" class="table-of-contents__link">Indexable (<code>{[key: string]: number}</code>) Type</a></li><li><a href="#mapped--conditional-types" class="table-of-contents__link">Mapped &amp; Conditional Types</a></li><li><a href="#any-type" class="table-of-contents__link"><code>any</code> Type</a></li><li><a href="#tuple-types" class="table-of-contents__link">Tuple Types</a></li><li><a href="#wrapper-types" class="table-of-contents__link">Wrapper types</a></li><li><a href="#return-type-only-generics" class="table-of-contents__link">Return type only generics</a></li></ul></li><li><a href="#consistency" class="table-of-contents__link">Consistency</a><ul><li><a href="#goals" class="table-of-contents__link">Goals</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.feb4ec90.js"></script>
<script src="/assets/js/main.e5be2b27.js"></script>
</body>
</html>